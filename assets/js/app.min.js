"use strict";
var ROOTADDR = ROOTADDR || ""
  , CODE = CODE || ""
  , points = points || ""
  , user_agent = navigator.userAgent.toLowerCase()
  , polygonArray = polygonArray || new Array;
$(document).ready(function() {
    user_agent.match(/(iphone|ipod|ipad)/) ? null : FastClick.attach(document.body),
    $(".fancybox").fancybox(),
    $(".must-be-validated").validationEngine(),
    toggleLangMenu(),
    $("nav>ul.secondLine li ul li").hover(function() {
        $(".non_hover").css("background", "#242f49")
    }, function() {
        $(".non_hover").css("background", "#242f49")
    })
}),
$(window).load(function() {
    initMainSlider(),
    initNewsSlidable(),
    initTabs(),
    goTop(),
    mobileMenu(),
    technicalDrawningsHelper(),
    initMap(),
    initProductsSlidable(),
    imgPointsSet("dot", 47, 47),
    menuController(),
    treatmentsHeightController(),
    contactHeightController(),
    boxesSize2Helper(),
    msgController(),
    newsListController(),
    txtSection(),
    remindTrigger(),
    fileFolder(),
    mapFiller(),
    fileFoldersHeightController(),
    theScroller(),
    tooltipstered(),
    boxesNoMargin(),
    slideAccordion(),
    exitPopup()
}),
$(window).resize(function() {
    fileFoldersHeightController()
});
var slideAccordion = function() {
    $(".file-group-name-slide .first-row").click(function() {
        $(this).hasClass("open") ? ($(".file-group-name-slide .list").slideUp().remove("opened"),
        $(".file-group-name-slide .first-row").removeClass("open")) : ($(".file-group-name-slide .list").slideUp().remove("opened"),
        $(".file-group-name-slide .first-row").removeClass("open"),
        $(this).parent().find(".list").slideDown().addClass("opened"),
        $(this).addClass("open"))
    })
}
  , initMainSlider = function() {
    var a = {
        slidesToShow: 1,
        slidesToScroll: 1,
        fade: !0,
        dots: !1,
        arrows: !1,
        autoplay: !0
    }
      , b = $("#slidable .slider")
      , c = b.children().length;
    b.on("init", function() {
        b.css({
            height: "auto",
            overflow: "auto"
        })
    }),
    b.slick(a);
    var d = function() {
        var a = $("#slidable .mask")
          , b = $("#slidable img")
          , c = new TimelineMax({
            paused: !0,
            useFrames: !0
        });
        if (c.to(a, 20, {
            opacity: 1,
            ease: Power0.easeNone
        }, 0).to(b, 20, {
            scale: 1.1,
            y: -8
        }, 0),
        Modernizr.mq("only screen and (max-width: 1024px)"))
            c.progress(0).pause();
        else {
            var d = $(window).scrollTop()
              , e = $("#slidable").outerHeight()
              , f = d / e
              , g = Math.round(100 * f) / 100;
            1 >= g ? c.progress(f).pause() : c.progress(0).pause()
        }
        $(window).scroll(function(a) {
            if (Modernizr.mq("only screen and (max-width: 1024px)"))
                c.progress(0).pause();
            else {
                var b = $(window).scrollTop()
                  , d = $("#slidable").outerHeight()
                  , e = b / d
                  , f = Math.round(100 * e) / 100;
                1 >= f && c.progress(e).pause()
            }
        })
    }
      , e = function() {
        var a = "<div class='customPaging'>";
        if (c > 1) {
            for (var d = 0; c > d; d++)
                a += "<div class='pagerItem' data-slide='" + d + "'></div>";
            a += "</div>",
            b.parent().append(a),
            $(document).on("click", ".pagerItem", function() {
                var a = $(this).attr("data-slide");
                "undefined" !== a && b.slick("slickGoTo", a),
                $(this).parent().find(".active").removeClass("active"),
                $(this).addClass("active")
            }),
            b.on("afterChange", function(a, c, d) {
                b.parent().find(".pagerItem.active").removeClass("active"),
                b.parent().find('[data-slide="' + d + '"]').addClass("active")
            })
        }
    };
    e(),
    d()
}
  , initNewsSlidable = function() {
    var a = {
        slidesToShow: 3,
        slidesToScroll: 3,
        arrows: !1,
        dots: !1,
        swipeToScroll: !1,
        draggable: !1,
        responsive: [{
            breakpoint: 895,
            settings: {
                slidesToShow: 3,
                slidesToScroll: 3
            }
        }, {
            breakpoint: 650,
            settings: {
                slidesToShow: 2,
                slidesToScroll: 2,
                swipeToScroll: !0,
                draggable: !0
            }
        }, {
            breakpoint: 450,
            settings: {
                slidesToShow: 1,
                slidesToScroll: 1,
                swipeToScroll: !0,
                draggable: !0
            }
        }]
    }
      , b = $(".newsList.homepage")
      , c = b.children().length / 3;
    b.slick(a);
    var d = function() {
        var a = "<div class='customPaging news'>";
        if (c > 1) {
            for (var d = 0; c > d; d++)
                a += "<div class='pagerItem " + (0 === d ? "active" : "") + "'  data-slide='" + 3 * d + "'></div>";
            a += "</div>",
            b.parent().find(".paggingWrapp").prepend(a),
            $(document).on("click", ".pagerItem", function() {
                var a = $(this).attr("data-slide");
                "undefined" !== a && b.slick("slickGoTo", a),
                $(this).parent().find(".active").removeClass("active"),
                $(this).addClass("active")
            })
        }
    };
    d()
}
  , initTabs = function() {
    var a = $(".theTabs");
    a.responsiveTabs()
}
  , mapFiller = function() {
    var a = $(".mapFiller .btn");
    a.click(function() {
        $(".mapFiller").fadeOut(300),
        setTimeout(function() {
            $(".mapFiller").remove()
        }, 350)
    })
}
  , goTop = function() {
    var a = $(".goUp");
    a.click(function(a) {
        a.preventDefault(),
        TweenMax.to($(window), 1.5, {
            scrollTo: {
                y: 0,
                autoKill: !0
            },
            ease: Power4.easeInOut,
            overwrite: 1
        })
    })
}
  , technicalDrawningsHelper = function() {
    var a = $(".technicalDrawnings ul .clickable");
    a.click(function() {
        var a = $(this).parent()
          , b = $(this).find("span");
        if (a.hasClass("active") === !1) {
            a.addClass("active");
            var c = a.find("> ul > li");
            if (b.html(b.attr("data-active")),
            c.length > 0) {
                var d = 100;
                c.each(function() {
                    var a = $(this);
                    setTimeout(function() {
                        a.removeClass("effect")
                    }, d),
                    d += 100
                })
            }
        } else {
            var c = a.find("> ul > li");
            if (c.length > 0) {
                var d = 150;
                b.html(b.attr("data-inactive")),
                setTimeout(function() {
                    a.removeClass("active")
                }, d * c.length),
                c.each(function() {
                    var a = $(this);
                    setTimeout(function() {
                        a.addClass("effect")
                    }, d),
                    d += 100
                })
            }
        }
    })
}
  , theSmallMap = function(a, b) {
    if (0 != $(".toLoadMap.smallMap").length) {
        var c = {
            center: new google.maps.LatLng(52.3331328,19.8124803),
            zoom: 6,
            scrollwheel: !1,
            styles: [{
                featureType: "administrative",
                elementType: "labels.text.fill",
                stylers: [{
                    color: "#444444"
                }]
            }, {
                featureType: "landscape",
                elementType: "all",
                stylers: [{
                    color: "#f2f2f2"
                }]
            }, {
                featureType: "poi",
                elementType: "all",
                stylers: [{
                    visibility: "off"
                }]
            }, {
                featureType: "road",
                elementType: "all",
                stylers: [{
                    saturation: -100
                }, {
                    lightness: 45
                }]
            }, {
                featureType: "road.highway",
                elementType: "all",
                stylers: [{
                    visibility: "simplified"
                }]
            }, {
                featureType: "road.arterial",
                elementType: "labels.icon",
                stylers: [{
                    visibility: "off"
                }]
            }, {
                featureType: "transit",
                elementType: "all",
                stylers: [{
                    visibility: "off"
                }]
            }, {
                featureType: "water",
                elementType: "all",
                stylers: [{
                    color: "#46bcec"
                }, {
                    visibility: "on"
                }]
            }],
            mapId: "mapContainer",
            draggable: !0
        };
        $.extend({}, c, a);
        $(".toLoadMap.smallMap").each(function() {
            var a = $(this)
              , b = new google.maps.LatLng(a.data("lat"),a.data("lng"))
              , d = $.extend({}, c, {
                center: b,
                zoom: a.data("zoom") || 6
            })
              , e = new google.maps.Map(document.getElementById(a.attr("id")),d)
              , f = {
                position: b,
                map: e,
                icon: ROOTADDR + "assets/img/marker.png"
            };
            new google.maps.Marker(f)
        })
    }
}
  , theMap = function(a, b) {
    var c = {
        center: new google.maps.LatLng(52.3331328,19.8124803),
        zoom: 6,
        scrollwheel: !0,
        styles: [{
            featureType: "administrative",
            elementType: "labels.text.fill",
            stylers: [{
                color: "#444444"
            }]
        }, {
            featureType: "landscape",
            elementType: "all",
            stylers: [{
                color: "#f2f2f2"
            }]
        }, {
            featureType: "poi",
            elementType: "all",
            stylers: [{
                visibility: "off"
            }]
        }, {
            featureType: "road",
            elementType: "all",
            stylers: [{
                saturation: -100
            }, {
                lightness: 45
            }]
        }, {
            featureType: "road.highway",
            elementType: "all",
            stylers: [{
                visibility: "simplified"
            }]
        }, {
            featureType: "road.arterial",
            elementType: "labels.icon",
            stylers: [{
                visibility: "off"
            }]
        }, {
            featureType: "transit",
            elementType: "all",
            stylers: [{
                visibility: "off"
            }]
        }, {
            featureType: "water",
            elementType: "all",
            stylers: [{
                color: "#46bcec"
            }, {
                visibility: "on"
            }]
        }],
        mapId: "mapContainer",
        draggable: !0,
        polygonOptions: {
            fillColor: "transparent",
            fillOpacity: .3,
            strokeWeight: 0,
            clickable: !0,
            editable: !1,
            zIndex: 1
        }
    }
      , d = $.extend({}, c, a)
      , e = new google.maps.Map(document.getElementById("mapContainer"),d)
      , f = (new google.maps.Marker(g),
    {
        position: new google.maps.LatLng(51.5286416,-.1015987),
        map: e,
        icon: "./marker.png"
    })
      , g = $.extend({}, f, b)
      , h = null
      , i = function(a) {
        var a = a;
        $.ajax({
            url: ROOTADDR + CODE + "contactPersons.html",
            type: "POST",
            data: {
                region: a
            },
            success: function(a) {
                var b = $(".searchResult ");
                b.find(".result").remove(),
                b.append(a),
                b.removeClass("hidden"),
                setTimeout(function() {
                    b.find(".result").removeClass("flushed")
                }, 300)
            },
            error: function() {
                $(".searchResult ").removeClass("hidden").find(".result").remove()
            }
        })
    }
      , j = new Array;
    if (polygonArray.length > 0)
        for (var k = 0; k < polygonArray.length; k++) {
            var l = polygonArray[k].polygon;
            l.fillColor = "transparent",
            l.strokeColor = "transparent",
            l.clickable = !1;
            var m = new google.maps.Polygon(l);
            m.setMap(e),
            m.thisID = polygonArray[k].polygonID,
            m.partnerID = polygonArray[k].partnerID,
            j.push(m)
        }
    google.maps.event.addListener(e, "click", function(a) {
        null !== h && h.setMap(null),
        h = new google.maps.Marker({
            position: a.latLng,
            map: e,
            icon: ROOTADDR + "assets/img/marker.png"
        });
        for (var b = a.latLng, c = new Array, d = 0; d < j.length; d++)
            google.maps.geometry.poly.containsLocation(b, j[d]) && c.push(j[d].partnerID);
        i(c)
    });
    var n = new google.maps.Geocoder
      , o = function(a) {
        if (0 !== a) {
            var b = new google.maps.LatLngBounds;
            b.extend(a),
            e.fitBounds(b),
            n = new google.maps.Geocoder,
            e.setZoom(11)
        }
    }
      , p = function() {
        var a = document.getElementById("itemSearch").value + geocoderPostfix;
        n.geocode({
            address: a
        }, function(a, b) {
            if (a[0]) {
                var c = a[0].geometry.location;
                "undefined" != typeof h && null !== h ? (h.setMap(null),
                h = new google.maps.Marker({
                    position: c,
                    map: e,
                    icon: ROOTADDR + "assets/img/marker.png"
                })) : h = new google.maps.Marker({
                    position: c,
                    map: e,
                    icon: ROOTADDR + "assets/img/marker.png"
                });
                for (var d = new Array, f = 0; f < j.length; f++)
                    google.maps.geometry.poly.containsLocation(c, j[f]) && d.push(j[f].partnerID);
                i(d),
                o(c),
                $(".mapFiller").fadeOut(300),
                setTimeout(function() {
                    $(".mapFiller").remove()
                }, 350)
            } else
                o(0)
        })
    }
      , q = function() {
        var a = $(".contactSearchForm");
        a.submit(function(a) {
            a.preventDefault(),
            a.stopPropagation(),
            $(".results.hidden").removeClass("hidden"),
            p()
        })
    };
    setTimeout(function() {
        q()
    }, 450)
}
  , initMap = function() {
    var a = $("#mapContainer");
    if (a.length > 0) {
        var b = a.attr("data-initial-zoom");
        console.log(typeof b),
        console.log(b),
        "undefined" == typeof b && (b = 6);
        var c = {
            zoom: parseInt(b)
        };
        theMap(c)
    }
    theSmallMap()
}
  , initProductsSlidable = function() {
    var a = $(".productsMin .slidable")
      , b = $(".productsBig");
    b.slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        dots: !1,
        arrows: !1,
        fade: !0,
        asNavFor: ".productsMin .slidable",
        responsive: [{
            breakpoint: 650,
            settings: {
                slidesToShow: 1,
                slidesToScroll: 1
            }
        }]
    }),
    a.slick({
        slidesToShow: 3,
        slidesToScroll: 1,
        centerMode: !0,
        focusOnSelect: !0,
        vertical: !0,
        asNavFor: ".productsBig"
    });
    var c = $(".arrows .top")
      , d = $(".arrows .bottom");
    c.click(function() {
        a.slick("slickNext")
    }),
    d.click(function() {
        a.slick("slickPrev")
    })
}
  , imgPointsSet = function(a, b, c) {
    var d = $(".imgSection.clickable");
    if (d.length > 0) {
        d.position().left,
        d.position().top
    }
    var e = function(a) {
        var b = $(".clickableItems");
        b.find(".visible").removeClass("visible"),
        b.find('[data-point-id="' + a + '"]').addClass("visible")
    }
      , f = function() {
        $(document).on("click", ".itemDot", function(a) {
            var b = $(this).attr("data-point-id");
            "undefined" !== b && null != b && (e(b),
            TweenMax.to($(window), 1.5, {
                scrollTo: {
                    y: $(".clickableItems").offset().top,
                    autoKill: !0
                },
                ease: Power4.easeInOut,
                overwrite: 1
            }))
        })
    }
      , g = function(a) {
        var b = a;
        if (b.length > 0)
            for (var c = 0; c < b.length; c++) {
                var e = "<span class='itemDot' style='left:" + b[c].x + "px;top:" + b[c].y + "px;' data-point-id='" + b[c].pointID + "'></span>";
                d.append(e)
            }
    };
    d.length > 0 && (f(),
    g(points))
}
  , menuController = function() {
    var a = $(".menuController");
    a.click(function() {
        $(this).toggleClass("active"),
        $("header nav").toggleClass("visible")
    })
}
  , treatmentsHeightController = function() {
    var a = $(".treatments .theImages > div");
    a.matchHeight()
}
  , mobileMenu = function() {
    $(document).on("click", ".mega-menu .arrow", e=>{
        let t = $(e.target).closest(".mega-menu");
        t.hasClass("open") ? t.removeClass("open") : t.addClass("open")
    }
    )
}
  , contactHeightController = function() {
    var a = $(".contactDetails strong");
    a.matchHeight(!1)
}
  , boxesSize2Helper = function() {
    var a = $(".boxes-size-2 .title");
    a.matchHeight()
}
  , msgController = function() {
    var a = $(".msg-wrap");
    if (a.length > 0) {
        a.click(function(b) {
            b.stopPropagation(),
            a.hasClass("productFormHidden") === !1 ? ($(this).fadeOut(300),
            setTimeout(function() {
                a.remove()
            }, 310)) : ("cellHelper" == b.target.className || "productFormHidden msg msg-wrap vis" === b.target.className) && $(this).removeClass("vis")
        });
        var b = function() {
            $(document).keyup(function(c) {
                27 == c.keyCode && (a.hasClass("productFormHidden") === !1 ? a.fadeOut(300) : a.removeClass("vis"),
                $(document).unbind(b()))
            })
        };
        $(document).bind(b())
    }
}
  , newsListController = function() {
    var a = $(".newsList.standardList a > span");
    a.matchHeight()
}
  , txtSection = function() {
    var a = $(".newsList .txtSection");
    setTimeout(function() {
        a.addClass("effect")
    }, 350)
}
  , toggleLangMenu = function() {
    var a = $(".activeLang");
    a.click(function(a) {
        a.preventDefault(),
        $(this).toggleClass("toggled")
    })
}
  , remindTrigger = function() {
    var a = $(".remindTrigger");
    a.click(function() {
        var a = $(".form1")
          , b = $("form.email");
        b.hasClass("effect") === !0 && (a.addClass("effect"),
        b.removeClass("effect"))
    })
}
  , fileFolder = function() {
    var a = $(".folderGrid");
    a.isotope({
        layoutMode: "masonry",
        itemSelector: ".itemFolder",
        masonry: {
            columnWidth: 200,
            gutter: 50,
            isFitWidth: !0
        }
    })
}
  , fileFoldersHeightController = function() {
    var a = $(".filesFolders");
    if (a.length > 0) {
        var b = $(window).outerHeight() - ($("header").outerHeight() + $(".fileButtons").outerHeight() + $("footer").outerHeight());
        a.css("minHeight", b)
    }
}
  , theScroller = function() {
    var a = $(".breadcrumb");
    a.length > 0 && $("html, body").animate({
        scrollTop: a.offset().top + a.outerHeight()
    })
}
  , tooltipstered = function() {
    $(".itemDot").each(function() {
        var a = $(".clickableItems").find('div[data-point-id="' + $(this).attr("data-point-id") + '"]');
        a.length > 0 && $(this).tooltipster({
            theme: "gorstaltheme",
            content: a.find(".title").text()
        })
    })
}
  , exitPopup = function() {
    $("[data-exit-popup]").on("click", function() {
        $("[data-popup]").hide()
    })
}
  , boxesNoMargin = function() {
    var a = $(".boxes .box-size-2");
    a.length > 0 && a.matchHeight()
};
